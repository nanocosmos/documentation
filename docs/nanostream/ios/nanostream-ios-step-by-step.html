<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-nanostream/ios/nanostream-ios-step-by-step">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Tutorial / Getting started with nanoStream and bintu.live | nanocosmos Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.nanocosmos.de/img/social-card.jpeg"><meta data-rh="true" name="twitter:image" content="https://docs.nanocosmos.de/img/social-card.jpeg"><meta data-rh="true" property="og:url" content="https://docs.nanocosmos.de/docs/nanostream/ios/nanostream-ios-step-by-step"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="live streaming, video live streaming, streaming, docs, developer docs"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tutorial / Getting started with nanoStream and bintu.live | nanocosmos Docs"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.nanocosmos.de/docs/nanostream/ios/nanostream-ios-step-by-step"><link data-rh="true" rel="alternate" href="https://docs.nanocosmos.de/docs/nanostream/ios/nanostream-ios-step-by-step" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.nanocosmos.de/docs/nanostream/ios/nanostream-ios-step-by-step" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="nanocosmos Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="nanocosmos Docs Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D55K07W445"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-D55K07W445",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="nanocosmos Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.00445c26.css">
<link rel="preload" href="/assets/js/runtime~main.6d6f7b76.js" as="script">
<link rel="preload" href="/assets/js/main.186ae9cd.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.nanocosmos.de" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.svg" alt="nanocosmos Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="nanocosmos Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" sidebarid="nanoStream Cloud" href="/docs/cloud/cloud_overview">nanoStream Cloud</a><a class="navbar__item navbar__link" sidebarid="H5Live Player" href="/docs/nanoplayer/nanoplayer_introduction">H5Live Player</a><a class="navbar__item navbar__link" sidebarid="Webcaster" href="/docs/webrtc/nanostream_webrtc_introduction">Webcaster</a><a class="navbar__item navbar__link" sidebarid="Analytics" href="/docs/cloud/analytics">Analytics</a><a class="navbar__item navbar__link" sidebarid="FAQ" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" sidebarid="Samples" href="/docs/samples">Samples</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">nanoStream Apps &amp; SDKs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream">Introduction</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/nanostream/android/nanostream_android_getting_started">Android</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/android/nanostream_android_getting_started">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/android/nanostream_android_developer_manual_playback">Playback</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/android/nanostream_android_developer_manual_streaming">Streaming Media</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/android/nanostream_android_developer_manual_sample">Sample</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/nanostream/ios/nanostream_ios_quick_start">iOS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/ios/nanostream_ios_quick_start">Developer Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/nanostream/ios/nanostream-ios-step-by-step">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/ios/nanostream_ios_sdk">SDK for iOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/ios/bintu_ios_sdk">bintu.live client SDK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/ios/bintu_ios_sample">iOS Streaming App in 5 Minutes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/ios/nanostream_ios_license_deployment">License Deployment Information</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/nanostream/windows/nanostream_windows_binaries">Windows</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/windows/nanostream_windows_binaries">Binary Modules for Windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/windows/nanostream_windows_developer_manual">Developer Manual</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/windows/nanostream_windows_language_integration">nanoStream Windows Language Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/windows/nanostream_windows_license_help">Setting the license</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/windows/nanostream_encoder_plugin_api">Encoder Plugin API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/nanostream/directshow">Direct Show</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/directshow">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/directshow/nanostream_directshow_h264">H264</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/directshow/nanostream_directshow_rtmp">RTMP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/directshow/directshow_rtmp_writer">RTMP Writer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/directshow/nanostream_directshow_rtsp">RTSP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/directshow/nanostream_directshow_udp_streaming">UDP/TS Streaming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nanostream/directshow/nanostream_directshow_video_filter">Video Filter</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">iOS</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Getting started</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tutorial / Getting started with nanoStream and bintu.live</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2><p>In this guide you will learn how to to build a live video broadcaster app with nanoStream that streams to our bintu.live streaming platform. Learn how to create the connection to bintu and obtain streaming configuration for your client. Setup the nanoStream client SDK to use the configuration we just got and broadcast your own live stream in minutes!</p><p>You will learn how to build simple broadcaster and player app from the ground of with XCode for iOS, that can play the stream from our broadcaster app.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2><ul><li>nanoStream 4.6 or later, including the bintu.live streaming platform connection</li><li>a valid Bintu APIKey</li><li>a nanoStreamSDK License valid for iOS (broadcast and playback)</li><li>bintu.live connector requires at least iOS 8.0</li></ul><p>This tutorial is based on Mac OS X 10.11.3, Xcode 7.1 and iOS 9.1.</p><h1>Bintu.live platform connection</h1><p>Our Bintu.live connection component consists of an entry point API client class <code>BNTAPIClient</code> which you use to make calls to our streaming platform. There are other class, like <code>BNTStreamInfo</code> and <code>BNTRTMPInfo</code> which mainly hold the configuration you receive from the <code>BNTAPIClient</code>.</p><p>In general, if you want to interface with our streaming platform, you construct an instance of the <code>BNTAPIClient</code> with its main constructor:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BNTAPIClient *client = [BNTAPIClient initWithAPIKey:apiKey];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you have an instance, you can create new streams with it, receive information about a previously created stream or list all streams that are present on your account.</p><p>Lets step through these in detail:</p><p>With the <code>createStream</code> call you create a new stream. You would use this in your broadcaster app. In the completion block of this method, you get an instance of <code>BNTStreamInfo</code> which exposes an instance of <code>BNTRTMPIngest</code> which holds the configuration you need to stream to bintu.live.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[client createStreamWithCompletion:^(BNTStreamInfo *stream, NSError *err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.streamID = stream.id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.streamURL = stream.ingest.rtmpInfo.url;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.streamName = stream.ingest.rtmpInfo.streamName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With the<code>getStreamWithID</code> call you can receive information about a previously created stream. In most cases, you would take the stream ID you get while creating a stream and store it on your own server somewhere. If anyone wants to view a stream, you send that ID to the player app. Then you can receive that stream&#x27;s playout information.
For example, if you want to play the stream via HLS:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[client getStreamWithID:@&quot;&lt;a long id&gt;&quot; andCompletion:^(BNTStreamInfo *stream, NSError *err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BNTHLSPlayout *playout = [stream.hlsPlayouts firstObject];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.hlsURL = playout.url;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Last but not least, you can list all streams on your account with the <code>getStreams</code> call. For example, you can bypass your server, get all streams on the player and let the user select the one they want to see. Or you just play the first one that is live, like shown below:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[client getStreamsWithCompletion:^(NSArray *streams, NSError *err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (BNTStreamInfo *stream in streams) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (stream.state == BNTStreamStateLive) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // play stream!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>That was a basic overview of your bintu.live component. Now we show you how to build an end-to-end system with that.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="live-video-encoder-broadcast-app">Live Video Encoder (broadcast) app<a href="#live-video-encoder-broadcast-app" class="hash-link" aria-label="Direct link to Live Video Encoder (broadcast) app" title="Direct link to Live Video Encoder (broadcast) app">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h3><p>Create a new Xcode project with the template &quot;Single View Application&quot;.</p><p>Enter your desired application name and organisation identifier. For this tutorial, our app is called &quot;StreamingExample&quot;, but you can name it anything you like. These settings do not matter right now. For this tutorial we will not create Unit or UI tests, so you can disable them for now. This guide will be in Objective-C.</p><p>Save the project somewhere on your computer.</p><p>Our app will be in portrait only. Therefore on the &quot;General&quot; tab of your application target in Xcode, under &quot;Deployment Info&quot; -&gt; &quot;Device Orientation&quot;, uncheck all except for &quot;Portrait&quot;. It should look like this:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="broadcast-view">Broadcast View<a href="#broadcast-view" class="hash-link" aria-label="Direct link to Broadcast View" title="Direct link to Broadcast View">​</a></h3><p>To create our broadcast view, go into the <code>Main.storyboard</code> file Xcode should have generated for you. It should be pretty empty right now.</p><p>Change the background color to any color (except white) you like so we can better see where it is.</p><p>This will be the view which will hold the camera preview so the user can see what is being streamed right now. We want this to cover our whole screen so we will make some adjustments to the autolayout constraints. We create four new constraints from our view to every edge of the screen. The distance should be zero for all, and margins should not be used for this.</p><p>Now the autolayout engine should tell us with some yellow warnings that our current view state does not reflect our constraints.</p><p>We will then click on the little yellow arrow next to &quot;View Controller Scene&quot; which will show us what is going wrong with the constraints.</p><p>After clicking on the little yellow triangle, Xcode shows us some recommended fixes for the problems. We choose &quot;Update Frames&quot; and click &quot;Fix Misplacement&quot;. This will instruct Xcode to use our constraints as guidelines and update the view accordingly, therefore expanding our preview view to cover the screen. Your storyboard should now look something like this:</p><p>Next we will add the button that will start and stop our stream. Add a new button to our main view, give it the title &quot;Start&quot; and give it a text color which we can see on top of our camera view.</p><p>The place looks a little bit off, so we will add some constraints which fix it to the bottom of the screen. Select the button and add a constraint with zero distance to the bottom margin of the screen.</p><p>Also add a constraint which horizontally centers the button.</p><p>After that, we will again use &quot;Update Frames&quot; and &quot;Fix Misplacement&quot; to make our view conform to our constraints.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-to-viewcontroller">Connection to ViewController<a href="#connection-to-viewcontroller" class="hash-link" aria-label="Direct link to Connection to ViewController" title="Direct link to Connection to ViewController">​</a></h3><p>Next, enter Automatic Mode and create outlets for the broadcast button and the preview to our ViewController. Do this via holding down Ctrl and dragging from the button/view to the interface section of the <code>ViewController.m</code> file.</p><p>Create an action for the button by dragging from the button to the implementation part of the viewcontroller code.</p><p>Now we have created our view. We can now move on to importing our modules.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="importing-the-sdks">Importing the SDKs<a href="#importing-the-sdks" class="hash-link" aria-label="Direct link to Importing the SDKs" title="Direct link to Importing the SDKs">​</a></h3><p>You need the following files: <code>Bintu.framework</code>, <code>libnanostreamAVC.a</code> and <code>nanostreamAVC.h</code>. Drag all files into your project in the Navigator on the left side. Check &quot;Copy items if needed&quot; for all of them.</p><p>Your project should now look something like this. The framework and library file should be automatically entered into the section &quot;Linked frameworks and libraries&quot;.</p><p>Remove the entry for <code>Bintu.framework</code> from that section (it will get readded later). Drag the <code>Bintu.framework</code> file from the Navigator to the section &quot;Embedded Binaries&quot;. This should add it to the &quot;Linked Frameworks and Libraries&quot; again.</p><p>If you build and run this project now on your iPhone, you should see the preview view with our colored background and the broadcast button. If you see a linker error that probably means you did not import the libraries correctly, try to do it again.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-nanostream-sdk">Setting up nanoStream SDK<a href="#setting-up-nanostream-sdk" class="hash-link" aria-label="Direct link to Setting up nanoStream SDK" title="Direct link to Setting up nanoStream SDK">​</a></h3><p>nanoStream SDK has some dependencies which you need to include, otherwise it will not compile correctly. Go to the &quot;Linked Frameworks and Libraries&quot; section of your target and add following libraries (by clicking the plus sign):</p><ul><li>CoreVideo.framework</li><li>libc++ (.tbd or .dylib)</li><li>libstdc++.6.0.9 (.tbd or .dylib)</li><li>AVFoundation.framework</li><li>CoreMedia.framework</li><li>libz (.tbd or .dylib)</li><li>UIKit.framework</li><li>Foundation.framework</li><li>CoreGraphics.framework</li><li>SystemConfiguration.framework</li><li>Accelerate.framework</li><li>VideoToolbox.framework (link as Optional, not as Required)</li><li>AudioToolbox.framework</li></ul><p>The section should now look like this:</p><p>Now enter your <code>ViewController.m</code> file. At this point, it looks something like this (your property names may vary):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  ViewController.m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  StreamingExample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  Created by nanocosmos on 18.02.16.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  Copyright © 2016 exampleorganisation. All rights reserved.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#import &quot;ViewController.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@interface ViewController ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (weak, nonatomic) IBOutlet UIButton *broadcastButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (weak, nonatomic) IBOutlet UIView *preview;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@implementation ViewController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- (void)viewDidLoad {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [super viewDidLoad];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Do any additional setup after loading the view, typically from a nib.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- (void)didReceiveMemoryWarning {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [super didReceiveMemoryWarning];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Dispose of any resources that can be recreated.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- (IBAction)toggleStreaming:(id)sender {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Below <code>#import ViewController.h</code>, import the nanostreamSDK header like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#import &quot;nanostreamAVC.h&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Below <code>@property (weak, nonatomic) IBOutlet UIView *preview;</code> add a property which will hold our SDK instance to the interface section.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@property (strong) nanostreamAVC *streamer;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After the <code>viewDidLoad</code> method, add the following lines (replace the license string with the real license):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- (void)viewDidAppear:(BOOL)animated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // create default settings for nanostream SDK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nanostreamAVCSettings *settings = [[nanostreamAVCSettings alloc] init];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // set our stream to portrait orientation, same as our interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    settings.orientation = AVCaptureVideoOrientationPortrait;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // create our nanoStream SDK instance and create the preview (by passing our preview view into it)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.streamer = [[nanostreamAVC alloc] initWithSettings:settings uiPreview:self.preview errorListener:nil];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [self.streamer setLicense:@&quot;&lt;your license here&gt;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you build and run this on your device, the app should start and ask for camera and microphone permissions.</p><p>After you accept, it should look something like this, with the preview running and the broadcast button at the bottom:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-the-bintulive-connection">Setting up the bintu.live connection<a href="#setting-up-the-bintulive-connection" class="hash-link" aria-label="Direct link to Setting up the bintu.live connection" title="Direct link to Setting up the bintu.live connection">​</a></h3><p>We will now create the connection to bintu so we can get our streaming configuration.
Add the following import after <code>#import &quot;nanostreamAVC.h&quot;</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#import &lt;Bintu/Bintu.h&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Below <code>@property (strong) nanostreamAVC *streamer;</code>, add these three properties:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@property (strong) NSString *streamURL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (strong) NSString *streamName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (strong) BNTAPIClient *client;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, add these lines to the <code>viewDidAppear:</code> method (replace the apikey string with your API key):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// create bintu api client with apikey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self.client = [[BNTAPIClient alloc] initWithAPIKey:@&quot;&lt;your apikey here&gt;&quot;];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can now create a stream without any effort. To do this, fill out the <code>toggleStreaming:</code> method:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- (IBAction)toggleStreaming:(id)sender {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [self.client createStreamWithCompletion:^(BNTStreamInfo *stream, NSError *err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            NSLog(@&quot;There was an error while creating the stream: %@&quot;, err);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.streamURL = stream.ingest.rtmpInfo.url;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.streamName = stream.ingest.rtmpInfo.streamName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NSLog(@&quot;We created a stream! StreamURL: %@, StreamName: %@&quot;, self.streamURL, self.streamName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This code will create a stream via the Bintu API and return the info we need.</p><p>If you run your app and tap the broadcast button, after a short while you should see something logged to the console. Either there was an error or you will get a stream.
If this first test was successful, we can continue. If there was an error logged, please check your API key and your account. The error message should tell you something about the error. If not, contact us.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="putting-it-together">Putting it together<a href="#putting-it-together" class="hash-link" aria-label="Direct link to Putting it together" title="Direct link to Putting it together">​</a></h3><p>If the test was successful, we can now really start streaming with the configuration we got. We need to give the configuration to our nanoStream SDK and start the stream. This is done via following code which we add at the end of the completion block of our <code>createStream</code> call:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// set the configuration we just received</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[self.streamer setURL:self.streamURL streamID:self.streamName];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// start the stream!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[self.streamer start:^(NSXError error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (error != NSXErrorNone) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NSLog(@&quot;There was an error starting the stream. %ld&quot;, (long)error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // this callback is called asynchronously on a background thread/queue.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // UI updates should happen on the main queue, therefore switch to it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dispatch_async(dispatch_get_main_queue(), ^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // change the button title so we know we are streaming</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [self.broadcastButton setTitle:@&quot;Stop&quot; forState:UIControlStateNormal];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now you should be able to tap the broadcast button and stream using nanoStream SDK. If the button changes its title to &quot;Stop&quot;, everything is great. If not, check the console and your code.</p><p>Of course we also want to stop the stream once we started it. You can check if a stream is running with the <code>-active</code> method on our nanostream SDK. Stopping a stream is done via the <code>-stop:withCompletion:</code> method. The first parameter (&quot;blocking&quot;) tells the SDK if you want to wait for all remaining stream packets (set to <code>true</code>) to be sent or if you want the stream to end right now (set to <code>false</code>).</p><p>You can now wrap the contents of the <code>-toggleStreaming:</code> method with this check:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if ([self.streamer active]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // stream is currently running. we want to stop it here.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [self.streamer stop:false withCompletion:^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // stream was stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // update button on main queue again:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dispatch_async(dispatch_get_main_queue(), ^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [self.broadcastButton setTitle:@&quot;Start&quot; forState:UIControlStateNormal];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // stream is not running, we want to create a new one and start it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // our previous code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are finished with the broadcaster! Altogether, our <code>-toggleStreaming:</code> looks like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- (IBAction)toggleStreaming:(id)sender {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ([self.streamer active]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // stream is currently running. we want to stop it here.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [self.streamer stop:false withCompletion:^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // stream was stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // update button on main queue again:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dispatch_async(dispatch_get_main_queue(), ^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [self.broadcastButton setTitle:@&quot;Start&quot; forState:UIControlStateNormal];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // stream is not running, we want to create a new one and start it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [self.client createStreamWithCompletion:^(BNTStreamInfo *stream, NSError *err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                NSLog(@&quot;There was an error while creating the stream: %@&quot;, err);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.streamURL = stream.ingest.rtmpInfo.url;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.streamName = stream.ingest.rtmpInfo.streamName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            NSLog(@&quot;We created a stream! StreamURL: %@, StreamName: %@&quot;, self.streamURL, self.streamName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // set the configuration we just received</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [self.streamer setURL:self.streamURL streamID:self.streamName];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // start the stream!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [self.streamer start:^(NSXError error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (error != NSXErrorNone) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    NSLog(@&quot;There was an error starting the stream. %ld&quot;, (long)error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // this callback is called asynchronously on a background thread/queue.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // UI updates should happen on the main queue, therefore switch to it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                dispatch_async(dispatch_get_main_queue(), ^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // change the button title so we know we are streaming</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    [self.broadcastButton setTitle:@&quot;Stop&quot; forState:UIControlStateNormal];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find the complete broadcaster sample project in the SDK-folder, at <code>samples/SimpleEncoder</code>. That sample also includes additional error handling and error surfacing, which has been omitted from this guide for brevity.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="playing-app">Playing App<a href="#playing-app" class="hash-link" aria-label="Direct link to Playing App" title="Direct link to Playing App">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-1">Setup<a href="#setup-1" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h3><p>Again, create a new Xcode project with the template &quot;Single View Application&quot;.</p><p>We will name this app &quot;PlayingExample&quot;. Again, disable Unit Tests and UI Tests.</p><p>Save the project somewhere on your computer where you can find it later.</p><p>To correspond with our broadcaster streaming in portrait orientation, the player will also be in portrait mode only. Therefore on the &quot;General&quot; tab of your application target in Xcode, under &quot;Deployment Info&quot; -&gt; &quot;Device Orientation&quot;, uncheck all except for &quot;Portrait&quot;. It should look like this:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="playing-view">Playing View<a href="#playing-view" class="hash-link" aria-label="Direct link to Playing View" title="Direct link to Playing View">​</a></h3><p>To create our playing view, go into the <code>Main.storyboard</code> file.</p><p>The UI will be a lot like our broadcaster app, so we just repeat all the steps. But instead of creating a &quot;Start&quot; button for our stream, we create a button with the title &quot;Play&quot; which will play back our stream. The other steps are identical. If you have trouble, please see the section <a href="#broadcast_view">Broadcast View</a> in the broadcaster part.  The result should look something like this:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-to-viewcontroller-1">Connection to ViewController<a href="#connection-to-viewcontroller-1" class="hash-link" aria-label="Direct link to Connection to ViewController" title="Direct link to Connection to ViewController">​</a></h3><p>Just like in the broadcaster example, we create outlets for our view and our button to the ViewController. If you have trouble with these steps, please see the <a href="#connection_to_viewcontroller">section from the broadcaster part</a>.</p><p>We also create an action and name it <code>togglePlayback</code>. The result looks like this:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="importing-the-sdks-1">Importing the SDKs<a href="#importing-the-sdks-1" class="hash-link" aria-label="Direct link to Importing the SDKs" title="Direct link to Importing the SDKs">​</a></h3><p>Just like in our player app, we need to import the nanoStream SDK. If you have trouble with any of the following steps, please see the more <a href="#importing_the_sdks">detailed guide in the broadcaster section</a>.</p><p>For the player app, you need a little bit more than for the broadcaster, but not much. You need the files <code>Bintu.framework</code>, <code>libnanostreamAVC.a</code>, <code>nanostreamAVC.h</code>, <code>nanostreamAVCExtendedCaptureSession.h</code> and <code>nanostreamAVCRtmpSourceCaptureSession.h</code>. Drag all of them into your project in the Navigator on the left side. Here as well, check &quot;Copy items if needed&quot; for all of them.</p><p>Your project will probably look something like this:</p><p>Again as well, remove <code>Bintu.framework</code> from the &quot;Linked Frameworks&quot; section, because we will add it soon. Drag <code>Bintu.framework</code> from the left side into the &quot;Embedded Binaries&quot; section. Now it should be in the &quot;Linked Frameworks&quot; section again.</p><p>You can now build and run the project on your device. You should see the preview view and your &quot;Play&quot; button.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-nanostream-sdk-1">Setting up nanoStream SDK<a href="#setting-up-nanostream-sdk-1" class="hash-link" aria-label="Direct link to Setting up nanoStream SDK" title="Direct link to Setting up nanoStream SDK">​</a></h3><p>Again, you need to add the dependencies for nanoStream SDK. Please refer to this <a href="#setting_up_nanostream_sdk">guide</a> for instructions.</p><p>Once you have your dependencies in place, your &quot;Linked Frameworks&quot; section should look like this:</p><p>Now we can start coding. Enter your <code>ViewController.m</code> file. It will look something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  ViewController.m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  PlayingExample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  Created by nanocosmos on 19.02.16.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  Copyright © 2016 exampleorganisation. All rights reserved.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#import &quot;ViewController.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@interface ViewController ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (weak, nonatomic) IBOutlet UIView *preview;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (weak, nonatomic) IBOutlet UIButton *playButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@implementation ViewController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- (void)viewDidLoad {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [super viewDidLoad];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Do any additional setup after loading the view, typically from a nib.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- (void)didReceiveMemoryWarning {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [super didReceiveMemoryWarning];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Dispose of any resources that can be recreated.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- (IBAction)togglePlayback:(id)sender {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we can setup our rtmp player. Below <code>#import ViewController.h</code>, import our rtmp player header:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#import &quot;nanostreamAVCRtmpSourceCaptureSession.h&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Add a property for the player below <code>@property (weak, nonatomic) IBOutlet UIButton *playButton;</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@property (strong) RtmpSourceCaptureSession *player;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After the <code>viewDidLoad</code> method, add the following lines which will create an instance of our player. Replace the license with you real license:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- (void)viewDidAppear:(BOOL)animated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // construct an instance of the player and give it our preview</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.player = [[RtmpSourceCaptureSession alloc] initWithPreview:self.preview andStatusListener:nil andLogLevel:LogLevelMinimal];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // set the license</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [self.player setLicense:@&quot;&lt;your license here&gt;&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We will configure the player later.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-the-connection-to-bintulive">Setting up the connection to bintu.live<a href="#setting-up-the-connection-to-bintulive" class="hash-link" aria-label="Direct link to Setting up the connection to bintu.live" title="Direct link to Setting up the connection to bintu.live">​</a></h3><p>In this part we again connect to bintu.live, this time we do not want to create a new stream but we want to play an existing one. For this use case, we assume that the last stream that is currently live is our stream. The following code follows that logic. If you have multiple users using your account, this may not work correctly (it may play another user&#x27;s stream).</p><p>Below <code>#import &quot;nanostreamAVCRtmpSourceCaptureSession.h&quot;</code>, import the bintu.live connector:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#import &lt;Bintu/Bintu.h&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Add these properties below <code>@property (strong) RtmpSourceCaptureSession *player;</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@property (strong) NSString *streamURL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (strong) NSString *streamName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@property (strong) BNTAPIClient *client;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These will hold an instance of our API client and contain the stream information which we will use for playback.</p><p>Add these lines to the end of the <code>viewDidAppear</code> method (replace <code>&lt;your apikey here&gt;</code> with your real API key.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// create bintu api client with apikey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self.client = [[BNTAPIClient alloc] initWithAPIKey:@&quot;&lt;your apikey here&gt;&quot;];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You are now ready to query your streams from bintu.live. To do this, fill out the <code>togglePlayback</code> method:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- (IBAction)togglePlayback:(id)sender {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // get all streams from our account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [self.client getStreamsWithCompletion:^(NSArray *streams, NSError *err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // check for errors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            NSLog(@&quot;There was an error while receiving the streams: %@&quot;, err);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // the last stream in stream is the one that was created last</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // therefore we go through the array in reverse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (BNTStreamInfo *stream in [streams reverseObjectEnumerator]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // check if this particular stream is live</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (stream.state == BNTStreamStateLive) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // we found a live one! this is the one we want to play</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // get rtmp playout information from it and store them</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                BNTRTMPPlayout *playout = [stream.rtmpPlayouts firstObject];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.streamURL = playout.rtmpInfo.url;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.streamName = playout.rtmpInfo.streamName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                NSLog(@&quot;We found a stream. StreamURL %@, StreamName %@&quot;, self.streamURL, self.streamName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // we found our stream, now we can exit the loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!self.streamName || !self.streamURL) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // we found no live stream. log an error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            NSLog(@&quot;There is no stream that is currently live.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This code will get all streams from bintu. These will be in chronological order, meaning the first stream in the list is the first stream that was created. We want to find the last stream that is live, so we traverse through the streams in reverse order. The first stream that we find that is live will be the latest live stream in chronological order. We store the information we get about that stream because we need them for playback later.</p><p>If no stream can be found that is live, we log an error to the console.</p><p>If you run your app and tap the play button, after a short while you should see something logged to the console. Either there was an error or you will get a stream. If this first test was successful, we can continue. If there was an error logged, please check your API key and your account. The error message should tell you something about the error. If not, contact us.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="play-the-stream-already">Play the stream already!<a href="#play-the-stream-already" class="hash-link" aria-label="Direct link to Play the stream already!" title="Direct link to Play the stream already!">​</a></h3><p>If the test was successful, we can now really play the stream that we found. We need to take our streamURL and streamName and put it into our nanoStream Player. The following code achieves this. Below</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    if (!self.streamName || !self.streamURL) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // we found no live stream. log an error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NSLog(@&quot;There is no stream that is currently live.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>add this code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// set our configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self.player.url = self.streamURL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self.player.streamId = self.streamName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// start playback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[self.player start];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// this callback is called asynchronously on a background thread/queue.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// UI updates should happen on the main queue, therefore switch to it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dispatch_async(dispatch_get_main_queue(), ^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // change the button title so we know we are playing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [self.playButton setTitle:@&quot;Stop&quot; forState:UIControlStateNormal];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can now run the app. If you have another device with the broadcaster app, start a stream there. Now tap the &quot;Play&quot; button in your app. After a while you should see that playback is starting and video should be displayed. Your &quot;Play&quot; button should change its title to &quot;Stop&quot;. If this does not happen, check your console log and check the previous steps.</p><p>We may want to stop playback before the stream has ended. For this, we can use the <code>-stop</code> method of our <code>RTMPSourceCaptureSession</code>. Checking if we are currently playing back a stream can be done via <code>-isPlaying</code>.</p><p>Now wrap the contents of the <code>-togglePlayback:</code> method with this check:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// check if we are playing already</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if ([self.player isPlaying]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // we are already playing. we want to stop now</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [self.player stop];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // the player will stop, we now update the button title again</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dispatch_async(dispatch_get_main_queue(), ^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [self.playButton setTitle:@&quot;Play&quot; forState:UIControlStateNormal];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // we are not playing, we want to start playback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // our previous code goes here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are finished with the player. Our complete <code>-togglePlayback:</code> should look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- (IBAction)togglePlayback:(id)sender {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // check if we are playing already</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ([self.player isPlaying]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // we are already playing. we want to stop now</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [self.player stop];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // the player will stop, we now update the button title again</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dispatch_async(dispatch_get_main_queue(), ^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [self.playButton setTitle:@&quot;Play&quot; forState:UIControlStateNormal];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // we are not playing, we want to start playback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // get all streams from our account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [self.client getStreamsWithCompletion:^(NSArray *streams, NSError *err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // check for errors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (err) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                NSLog(@&quot;There was an error while receiving the streams: %@&quot;, err);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // the last stream in stream is the one that was created last</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // therefore we go through the array in reverse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (BNTStreamInfo *stream in [streams reverseObjectEnumerator]) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // check if this particular stream is live</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (stream.state == BNTStreamStateLive) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // we found a live one! this is the one we want to play</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // get rtmp playout information from it and store them</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    BNTRTMPPlayout *playout = [stream.rtmpPlayouts firstObject];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.streamURL = playout.rtmpInfo.url;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.streamName = playout.rtmpInfo.streamName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    NSLog(@&quot;We found a stream. StreamURL %@, StreamName %@&quot;, self.streamURL, self.streamName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // we found our stream, now we can exit the loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!self.streamName || !self.streamURL) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // we found no live stream. log an error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                NSLog(@&quot;There is no stream that is currently live.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // set our configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.player.url = self.streamURL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.player.streamId = self.streamName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // start playback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [self.player start];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // this callback is called asynchronously on a background thread/queue.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // UI updates should happen on the main queue, therefore switch to it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dispatch_async(dispatch_get_main_queue(), ^{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // change the button title so we know we are playing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [self.playButton setTitle:@&quot;Stop&quot; forState:UIControlStateNormal];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find the complete player sample project in the SDK-folder, at <code>samples/SimplePlayer</code>. That sample also includes additional error handling and error surfacing, which has been omitted from this guide for brevity.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="end-to-end-goodness">End-To-End Goodness<a href="#end-to-end-goodness" class="hash-link" aria-label="Direct link to End-To-End Goodness" title="Direct link to End-To-End Goodness">​</a></h2><p>You can now use both apps together if you have two devices to test on. Load the broadcaster app on one device and the player app on another one.</p><p>Start a stream in the broadcaster app. It should look something like this:</p><p>Now start the player app on the other device and press &quot;Play&quot;. It should find your stream from the other device and start playing it. Please allow a little time for the playback to begin. It should then look something like this:</p><p>Congratulations! You now have built your own live streaming app, end-to-end with nanoStream and bintu.live!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-08-19T21:18:08.000Z">Aug 19, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/nanostream/ios/nanostream_ios_quick_start"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Developer Quickstart</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/nanostream/ios/nanostream_ios_sdk"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SDK for iOS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#live-video-encoder-broadcast-app" class="table-of-contents__link toc-highlight">Live Video Encoder (broadcast) app</a><ul><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#broadcast-view" class="table-of-contents__link toc-highlight">Broadcast View</a></li><li><a href="#connection-to-viewcontroller" class="table-of-contents__link toc-highlight">Connection to ViewController</a></li><li><a href="#importing-the-sdks" class="table-of-contents__link toc-highlight">Importing the SDKs</a></li><li><a href="#setting-up-nanostream-sdk" class="table-of-contents__link toc-highlight">Setting up nanoStream SDK</a></li><li><a href="#setting-up-the-bintulive-connection" class="table-of-contents__link toc-highlight">Setting up the bintu.live connection</a></li><li><a href="#putting-it-together" class="table-of-contents__link toc-highlight">Putting it together</a></li></ul></li><li><a href="#playing-app" class="table-of-contents__link toc-highlight">Playing App</a><ul><li><a href="#setup-1" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#playing-view" class="table-of-contents__link toc-highlight">Playing View</a></li><li><a href="#connection-to-viewcontroller-1" class="table-of-contents__link toc-highlight">Connection to ViewController</a></li><li><a href="#importing-the-sdks-1" class="table-of-contents__link toc-highlight">Importing the SDKs</a></li><li><a href="#setting-up-nanostream-sdk-1" class="table-of-contents__link toc-highlight">Setting up nanoStream SDK</a></li><li><a href="#setting-up-the-connection-to-bintulive" class="table-of-contents__link toc-highlight">Setting up the connection to bintu.live</a></li><li><a href="#play-the-stream-already" class="table-of-contents__link toc-highlight">Play the stream already!</a></li></ul></li><li><a href="#end-to-end-goodness" class="table-of-contents__link toc-highlight">End-To-End Goodness</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">nanoStream Cloud</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dashboard.nanostream.cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dashboard<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://info.nanocosmos.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Overview<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://info.nanocosmos.de/interactivelivestreaming/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Use Cases<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/buy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Pricing<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://info.nanocosmos.de/free-trial/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Free Trial<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/blog/jobs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Career<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.nanocosmos.de/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/nanocosmos/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/nanocosmos-gmbh/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/nanovideo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@nanocosmos" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://info.nanocosmos.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/support" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.nanocosmos.de/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.nanocosmos.de/" target="_self" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/logo.svg" alt="nanocosmos Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="160"><img src="/img/logo.svg" alt="nanocosmos Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="160"></a></div><div class="footer__copyright">Copyright © 2024. nanocosmos GmbH - Docs Version: Mon, 19 Aug 2024 21:18:57 GMT</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6d6f7b76.js"></script>
<script src="/assets/js/main.186ae9cd.js"></script>
</body>
</html>