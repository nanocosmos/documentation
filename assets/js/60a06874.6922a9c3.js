"use strict";(self.webpackChunknanocosomos_documentation=self.webpackChunknanocosomos_documentation||[]).push([[4997],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var r=t(96540);const s={},a=r.createContext(s);function o(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(a.Provider,{value:n},e.children)}},36491:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"nanoplayer/nanoplayer_update_source","title":"Update Source","description":"The nanoStream H5Live Player updateSource API lets you replace the exisiting source (config.source) with a new source.","source":"@site/docs/nanoplayer/nanoplayer_update_source.md","sourceDirName":"nanoplayer","slug":"/nanoplayer/nanoplayer_update_source","permalink":"/docs/nanoplayer/nanoplayer_update_source","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1755776912000,"frontMatter":{"id":"nanoplayer_update_source","title":"Update Source","sidebar_label":"Update Source"}}');var s=t(74848),a=t(28453);const o={id:"nanoplayer_update_source",title:"Update Source",sidebar_label:"Update Source"},i=void 0,l={},c=[{value:"How to use",id:"how-to-use",level:2},{value:"Source Object Parameter",id:"source-object-parameter",level:3},{value:"Example single stream source",id:"example-single-stream-source",level:3},{value:"Example multi stream source object with ABR",id:"example-multi-stream-source-object-with-abr",level:3},{value:"Example stream group source object with ABR",id:"example-stream-group-source-object-with-abr",level:3},{value:"updateSource API",id:"updatesource-api",level:2},{value:"Example updateSource call with entries",id:"example-updatesource-call-with-entries",level:3},{value:"Example updateSource call with stream group",id:"example-updatesource-call-with-stream-group",level:3},{value:"updateSource Events",id:"updatesource-events",level:2},{value:"Start Event",id:"start-event",level:3},{value:"Completion Events",id:"completion-events",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["The nanoStream H5Live Player updateSource API lets you replace the exisiting source (",(0,s.jsx)(n.code,{children:"config.source"}),") with a new source."]}),"\n",(0,s.jsx)(n.admonition,{title:"Important",type:"caution",children:(0,s.jsxs)(n.p,{children:["To start using the update source feature make sure you're using the minimum required nanoStream H5Live Player version ",(0,s.jsx)(n.strong,{children:"4.0"})]})}),"\n",(0,s.jsx)(n.h2,{id:"how-to-use",children:"How to use"}),"\n",(0,s.jsxs)(n.p,{children:["With the nanoStream H5Live Player ",(0,s.jsx)(n.strong,{children:"version >= 4.0"})," you only need to provide a new ",(0,s.jsx)(n.code,{children:"source"})," object as a parameter. In case a stream is currently playing and a stream of the new source should play immediately a stream switch will be initialized with the switch options that are set directly in the ",(0,s.jsx)(n.code,{children:"config.source.options.switch"})," object. If an errror occurs in this case the playback is interrupted and an error is thrown."]}),"\n",(0,s.jsx)(n.admonition,{title:"Important",type:"caution",children:(0,s.jsx)(n.p,{children:"The new source will always replace the previous source even in case of an error!"})}),"\n",(0,s.jsx)(n.h3,{id:"source-object-parameter",children:"Source Object Parameter"}),"\n",(0,s.jsxs)(n.p,{children:["The updateSource method ",(0,s.jsx)(n.strong,{children:"always"})," expects a new source object as a parameter."]}),"\n",(0,s.jsxs)(n.p,{children:["As you may notice this object is similar to the structure of the ",(0,s.jsx)(n.code,{children:"config"})," object you are using to set up the player."]}),"\n",(0,s.jsx)(n.h3,{id:"example-single-stream-source",children:"Example single stream source"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var source = {\n    "entries": [ // array of \'entry\' objects\n        {\n            "index": 0,\n            "label": "high",\n            "tag": "this is a single entry high quality stream",\n            "info": {\n                "bitrate": 1200,\n                "width": 1280,\n                "height": 720,\n                "framerate": 30\n            },\n            "hls": "",\n            "h5live": {\n                "rtmp": {\n                    "url": "rtmp://bintu-play.nanocosmos.de/play",\n                    "streamname": "XXXXX-YYYY0"\n                },\n                "server": {\n                    "websocket": "wss://bintu-h5live.nanocosmos.de:443/h5live/stream.mp4",\n                    "hls": "https://bintu-h5live.nanocosmos.de:443/h5live/http/playlist.m3u8",\n                    "progressive": "https://bintu-h5live.nanocosmos.de:443/h5live/http/stream.mp4"\n                },\n                "token": "",\n                "security": {}\n            },\n            "bintu": {}\n        }\n    ]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"example-multi-stream-source-object-with-abr",children:"Example multi stream source object with ABR"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var source = {\n    "entries": [ // array of \'entry\' objects\n        {\n            "index": 0,\n            "label": "high",\n            "tag": "this is a high quality stream",\n            "info": {\n                "bitrate": 1200,\n                "width": 1280,\n                "height": 720,\n                "framerate": 30\n            },\n            "hls": "",\n            "h5live": {\n                "rtmp": {\n                    "url": "rtmp://bintu-play.nanocosmos.de/play",\n                    "streamname": "XXXXX-YYYY0"\n                },\n                "server": {\n                    "websocket": "wss://bintu-h5live.nanocosmos.de:443/h5live/stream.mp4",\n                    "hls": "https://bintu-h5live.nanocosmos.de:443/h5live/http/playlist.m3u8",\n                    "progressive": "https://bintu-h5live.nanocosmos.de:443/h5live/http/stream.mp4"\n                },\n                "token": "",\n                "security": {}\n            },\n            "bintu": {}\n        },\n        {\n            "index": 1,\n            "label": "medium",\n            "tag": "this is a medium quality stream",\n            "info": {\n                "bitrate": 800,\n                "width": 864,\n                "height": 480,\n                "framerate": 30\n            },\n            "hls": "",\n            "h5live": {\n                "rtmp": {\n                    "url": "rtmp://bintu-play.nanocosmos.de/play",\n                    "streamname": "XXXXX-YYYY1"\n                },\n                "server": {\n                    "websocket": "wss://bintu-h5live.nanocosmos.de:443/h5live/stream.mp4",\n                    "hls": "https://bintu-h5live.nanocosmos.de:443/h5live/http/playlist.m3u8",\n                    "progressive": "https://bintu-h5live.nanocosmos.de:443/h5live/http/stream.mp4"\n                },\n                "token": "",\n                "security": {}\n            },\n            "bintu": {}\n        },\n        {\n            "index": 2,\n            "label": "low",\n            "tag": "this is a low quality stream",\n            "info": {\n                "bitrate": 400,\n                "width": 426,\n                "height": 240,\n                "framerate": 15\n            },\n            "hls": "",\n            "h5live": {\n                "rtmp": {\n                    "url": "rtmp://bintu-play.nanocosmos.de/play",\n                    "streamname": "XXXXX-YYYY2"\n                },\n                "server": {\n                    "websocket": "wss://bintu-h5live.nanocosmos.de:443/h5live/stream.mp4",\n                    "hls": "https://bintu-h5live.nanocosmos.de:443/h5live/http/playlist.m3u8",\n                    "progressive": "https://bintu-h5live.nanocosmos.de:443/h5live/http/stream.mp4"\n                },\n                "token": "",\n                "security": {}\n            },\n            "bintu": {}\n        }\n    ],\n    "options": {\n        "adaption": {\n            "rule": "deviationOfMean" // enable ABR\n        },\n        "switch": {\n            \'method\': \'server\',\n            \'pauseOnError\': false,\n            \'forcePlay\': true,\n            \'fastStart\': false,\n            \'timeout\': 10,\n        }\n    },\n    "startIndex": 2 // lowest\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"example-stream-group-source-object-with-abr",children:"Example stream group source object with ABR"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'var source = {\n    "group": {\n        "id": "xxxxxxxx-zzzz-yyy-aaaa-aaabbbcccddd", // your stream group id\n        "security": {   // required for secure group playback\n            "jwtoken": "xxx" // your security token if applicable\n        },\n        "apiurl": "https://bintu.nanocosmos.de", // optional\n        "startQuality": "medium" // optional: high, medium-high, medium, medium-low, low\n    },\n    // ABR is enabled by default with "deviationOfMean2" for group configuration\n    "options": {\n        "switch": {\n            \'method\': \'server\',\n            \'pauseOnError\': false,\n            \'forcePlay\': true,\n            \'fastStart\': false,\n            \'timeout\': 10,\n        }\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"updatesource-api",children:"updateSource API"}),"\n",(0,s.jsx)(n.h3,{id:"example-updatesource-call-with-entries",children:"Example updateSource call with entries"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'var source = {\n    "entries": [ // array of \'entry\' objects\n        {\n            "index": 0,\n            "label": "high",\n            "tag": "this is a single entry high quality stream",\n            "info": {\n                "bitrate": 1200,\n                "width": 1280,\n                "height": 720,\n                "framerate": 30\n            },\n            "hls": "",\n            "h5live": {\n                "rtmp": {\n                    "url": "rtmp://bintu-play.nanocosmos.de/play",\n                    "streamname": "XXXXX-YYYY0"\n                },\n                "server": {\n                    "websocket": "wss://bintu-h5live.nanocosmos.de:443/h5live/stream.mp4",\n                    "hls": "https://bintu-h5live.nanocosmos.de:443/h5live/http/playlist.m3u8",\n                    "progressive": "https://bintu-h5live.nanocosmos.de:443/h5live/http/stream.mp4"\n                },\n                "token": "",\n                "security": {}\n            },\n            "bintu": {}\n        }\n    ]\n}\n\n// player instance\nplayer.updateSource(source).then(function(config) {\n    console.log(\'update source ok with config: \' + JSON.stringify(config));\n}, function(error) {\n    console.log(error);\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"example-updatesource-call-with-stream-group",children:"Example updateSource call with stream group"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'var source = {\n    "group": {\n        "id": "xxxxxxxx-zzzz-yyy-aaaa-aaabbbcccddd", // your stream group id\n        "security": {   // required for secure group playback\n            "jwtoken": "xxx" // your security token if applicable\n        },\n        "startQuality": "high" // optional: high, medium-high, medium, medium-low, low\n    }\n}\n\n// player instance\nplayer.updateSource(source).then(function(config) {\n    console.log(\'update source with group ok with config: \' + JSON.stringify(config));\n}, function(error) {\n    console.log(error);\n});\n'})}),"\n",(0,s.jsx)(n.h2,{id:"updatesource-events",children:"updateSource Events"}),"\n",(0,s.jsxs)(n.p,{children:["With the release of the ",(0,s.jsx)(n.code,{children:"updateSource"})," method there are also ",(0,s.jsx)(n.strong,{children:"4"})," events you should keep in mind:"]}),"\n",(0,s.jsx)(n.h3,{id:"start-event",children:"Start Event"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./nanoplayer_api#NanoPlayer..event_onUpdateSourceInit",children:"onUpdateSourceInit"})}),": This event signals an initialized update source request. This always ",(0,s.jsx)(n.strong,{children:"only"})," a start event! Another completion event will follow."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"completion-events",children:"Completion Events"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./nanoplayer_api#onupdatesourcesuccess",children:"onUpdateSourceSuccess"})}),": This event signals a successful update source request and fires if the source is updated."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./nanoplayer_api#NanoPlayer..event_onUpdateSourceSuccess",children:"onUpdateSourceFail"})}),": This event signals a failed update source request. Fired if an error occurs during the source update."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./nanoplayer_api#NanoPlayer..event_onUpdateSourceAbort",children:"onUpdateSourceAbort"})}),": This event signals an aborted update source request. Possible reasons are an equal source (",(0,s.jsx)(n.strong,{children:"'equalsource'"}),"), a superseding (",(0,s.jsx)(n.strong,{children:"'superseded'"}),") or the time difference between two following ",(0,s.jsx)(n.code,{children:"updateSource"})," calls that is too small  (",(0,s.jsx)(n.strong,{children:"'frequency'"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Also, keep in mind..."})," there will be an ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./nanoplayer_api#NanoPlayer..event_onStreamInfo",children:"onStreamInfo"})})," event indicating that the first image of the new stream is getting played out."]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.mdxAdmonitionTitle,{children:(0,s.jsx)(n.strong,{children:"Note:"})}),(0,s.jsxs)(n.p,{children:["You can find more specific information on all player events ",(0,s.jsx)(n.a,{href:"./nanoplayer_api#NanoPlayer..event_onUpdateSourceInit",children:"here"}),"."]})]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);